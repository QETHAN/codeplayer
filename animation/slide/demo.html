<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>111111111111</title>
    <style type="text/css">
        #f li ul{
            overflow:hidden;
        }
    </style>
</head>
<body>
<ul id="f">
    <li id="dd">111111
        <ul>
            <li>22222222222</li>
            <li>33333333333</li>
            <li>44444444444</li>
            <li>5555555555</li>
            <li>66666666666</li>
            <li>777777777777</li>
            <li>8888888888</li>
            <li>999999999</li>
        </ul>
    </li>
</ul>
</body>
<script type="text/javascript">
    function $(id){
        return document.getElementById(id);
    }
    var timer = null;
    ss = $("f").getElementsByTagName("ul")[0].style;
    ss.visibility = "visible";
    ss.position = "absolute";
    ss.visibility = "hidden";
    $("dd").onclick = function(){
        var f = $("f").getElementsByTagName("ul")[0];
        var h = f.offsetHeight;
        (f.style.visibility == "visible") ? slideUp(f,h):slideDown(f,h);
    }
    function slideDown(o,h){
        var s = o.style,speed;
        clearInterval(timer);
        s.height = "0px";
        s.position = "static";
        s.visibility = "visible";
        timer = setInterval(function(){
            speed = Math.ceil((h - o.offsetHeight) / 5);
            s.height = o.offsetHeight + speed + "px";
            console.log(speed);
            if(o.offsetHeight >= h){clearInterval(timer)}
        },30);
    }
    function slideUp(o,h){
        var s = o.style,spped;
        clearInterval(timer);
        timer = setInterval(function(){
            speed = Math.ceil(o.offsetHeight / 5);
            s.height = o.offsetHeight - speed + "px";
            if(o.offsetHeight <= 0){
                clearInterval(timer);
                s.position = "absolute";
                s.visibility = "hidden";
                s.height = h + "px";
            }
        },30);
    }
</script>
</html>
